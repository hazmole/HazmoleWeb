<html>
<head>
	<title>作業三：網頁儲存測試</title>
	<link rel=stylesheet type=text/css href=mystyle.css>
	<script language="JavaScript">
		var kb = "";
		var mb = "";
		var by = "X"
		
		var counter = new Array(0,0,0);
		
		function setValue(){
			for(var i=0;i<1024;i++)
				kb += by;
			for(var i=0;i<1024;i++)
				mb += kb;
		}
		function Test(){
			//KB
			try{
				setMb();
			}
			catch(err){
				try{
					setKb();
				}
				catch(e2){
					try{
						setby();
					}
					catch(e3){
						alert("網頁容量已超過上限，無法繼續儲存！(已將測試用資料刪除)");
					}
				}
				
			}
			finally{
				window.localStorage.clear();
				document.getElementById("output").innerHTML = "容量："+ counter[0]+"MB," + counter[1]+"KB," + counter[2]+"Bytes";
			}
		}
		
		function setby(){
			for(var i=0;;i++){
				window.localStorage.setItem(("B"+i),by);
				counter[2] = i+1;
			}
		}
		function setKb(){
			for(var i=0;;i++){
				window.localStorage.setItem(("K"+i),kb);
				counter[1] = i+1;
			}
		}
		function setMb(){
			for(var i=0;;i++){
				window.localStorage.setItem(("M"+i),mb);
				counter[0] = i+1;
			}
		}
		
		
		
		function Clear(){
			window.localStorage.clear();
			document.getElementById("output").innerHTML = "None Storage Yet";
		}
		
		setValue();
		
	</script>
</head>
<body>
<center>
	<font size=5><b>作業三：網頁儲存測試</b></font><br>
	Author:黃主同
<hr>
	前往<a href=https://dl.dropboxusercontent.com/u/153392783/Web/HW3-1.html>3-1:Cookie實作</a>
<hr>
	<div id="output" style="background-color:#AAAAAA;width:250;height:30">None Storage Yet</div><p>
	<input type="button" value="測試" onClick="Test()">
	<input type="button" value="清空" onClick="Clear()">

</body>
</html>
